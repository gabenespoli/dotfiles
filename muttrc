# .muttrc
# much taken from http://stevelosh.com/blog/2012/10/the-homely-mutt/
# for multiple accounts: https://pbrisbin.com/posts/two_accounts_in_mutt/

# add save hook to set default dir for saving attachments http://unix.stackexchange.com/questions/241994/how-can-i-change-the-default-save-folder-in-mutt

# thoughts for composing in a separate tmux pane: http://mutt-users.mutt.narkive.com/WHpZ33fG/keep-mutt-open-while-editing-new-message

## Paths
set alias_file          = ~/private/mutt/aliases.muttrc
set mailcap_path        = ~/dotfiles/mutt/mailcap
set folder              = ~/.mail
set header_cache        = ~/.mail/cache/headers
set message_cachedir    = ~/.mail/cache/bodies
set certificate_file    = ~/.mail/certificates
set tmpdir              = ~/.mail/temp
set spoolfile           = "=Archive"
set mbox                = "=Archive"
set postponed           = "=Drafts"
#set trash               = "=Trash" # move deleted messages here

## Account Settings
set realname            = "Gabe Nespoli"
set from                = "gabenespoli@gmail.com"
alternates              "gabe@psych.ryerson.ca|gabenespoli@gmail.com"
set sendmail            = "/usr/local/bin/msmtp -a Home"
set sendmail_wait       = 0
unset record            # gmail will move sent messages to sent
unset move              # gmail will move messages from spool to mbox
set delete              # actually delete email when sync or quit
unset mark_old          # set mail as old after opening mutt once
set mbox_type           = Maildir
mailboxes =INBOX \
          =Archive \
          =Drafts \

## Basic Options
folder-hook . "push <first-entry>" # go to first message, not first unread
set wait_key = no        # shut up, mutt
set timeout = 3          # idle time before scanning
set mail_check = 0       # minimum time between scans
unset confirmappend
set quit                 # confirm when quitting
set sort_alias=alias
set reverse_alias=yes
unset beep_new             # bell on new mails
set pipe_decode          # strip headers and eval mimes when piping
unset thorough_search      # strip headers and eval mimes before searching
set mail_check_stats
unset arrow_cursor
set recall=no           # don't ask to recall message when composing new

## Index View Options
set date_format = "%Y-%m-%d"
set index_format = "%5C [%Z] %X  %D  %-20.20F  %s"
set sort = reverse-date
#set sort = threads                         # like gmail
#set sort_aux = reverse-last-date-received  # like gmail (sort_aux only used with sort=threads)
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
#set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"

## Viewing Options
set pager_index_lines = 0  # number of index lines to show
set pager_context = 3      # number of context lines to show
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs
auto_view text/html
alternative_order text/plain text/enriched text/html
set sidebar_visible = no
set sidebar_width   = 30
set sidebar_format  = "%B%?F?[%F]?%* %?N?%N/?%S%?L?[%L]?"

## Compose View Options
#set editor          = "vim" 
#set editor='vim + -c "setlocal wrapmargin=0 textwidth=0 wrap nocp linebreak nohlsearch"  -c "?^$"'
set editor='vim + -c "call MuttMailMode()"'
set envelope_from                           # which from?
set sig_dashes                              # dashes before sig
set edit_headers                            # show headers when composing
set fast_reply                              # skip to compose when replying
#set askcc                                   # ask for CC:
set fcc_attach                              # save attachments with the body
unset mime_forward                          # forward attachments as part of body
set forward_format  = "Fwd: %s"             # format of subject when forwarding
set forward_decode                          # decode when forwarding
set attribution     = "On %d, %n wrote:"    # format of quoting header
set reply_to                                # reply to Reply to: field
set reverse_name                            # reply as whomever it was to
set include                                 # include message in replies
set forward_quote                           # include message in forwards
set text_flowed                             # don't add line break if line ends with white space

## goobook
set query_command   = "goobook query %s"

## Source colors and keybindings
source ~/dotfiles/mutt/colors.muttrc
source ~/dotfiles/mutt/keybindings.muttrc
source $alias_file

